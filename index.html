<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kartika.id</title>
    
    <!-- Basic Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="manifest" href="favicon/site.webmanifest">
    <link rel="mask-icon" href="favicon/safari-pinned-tab.svg" color="#d04a02">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Gelasio:wght@600&family=Josefin+Sans:wght@600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="container nav">
            <div class="logo">
                <img src="assets/Kartika-logo.png" alt="Kartika.id Logo">
                <p>Kartini Teknik Berdaya</p>
            </div>
            <div class="nav-links">
                <a href="#">About Us</a>
                <a href="#">Our Programs</a>
                <a href="#">Our Team</a>
                <a href="#" class="btn">Join Now</a>
            </div>
        </div>
    </header>

    <section class="hero">
        <div class="container hero-content-container">
            <div class="hero-content">
                <h1>Empowering Future<br>Female Engineers</h1>
                <p>From Eastern Indonesia to the Nation</p>
            </div>
        </div>
        <div class="hero-image">
            <img src="assets/kartika sect-1.png" alt="Kartika Engineers" />
            <!-- Removed squares as they are not in the provided image -->
        </div>
    </section>

    <section class="about-us">
        <div class="container about-us-content-container">
            <div class="about-us-content">
                <h1>About Us</h1>
                <p>Kartika.id is a community initiative founded by Ugi Fitri Syawalyani, an Industrial Engineering student at Universitas Hasanuddin and an alumna of the Young Leaders for Indonesia program by McKinsey & Co. Our mission is to empower female engineering students—starting from Eastern Indonesia and now expanding nationwide. We aim to bridge the gap in support, opportunity, and access to networks through mentoring programs, career-sharing sessions, and inclusive community building. Kartika.id helps female engineering students navigate career paths in engineering, break stereotypes, and grow both professionally and personally.</p>
            </div>
            <div class="about-us-image">
                <img src="assets/potrait-right.png" alt="Kartika.id Team" />
            </div>
        </div>
    </section>

    <section class="about-us">
        <div class="container about-us-content-container">
            <div class="about-us-content">
                <h1>Our Programs</h1>
                <div class="programs-grid">
                    <div class="program-item">
                        <div class="program-icon">
                            <i class="fas fa-share-alt"></i>
            </div>
                        <h3>Kartishare</h3>
                        <p class="subtitle">Knowledge Sharing Sessions</p>
                        <p>Knowledge sharing sessions with expert women speakers from various engineering fields. Gain valuable information and inspiration to understand your potential career paths.</p>
            </div>
                    <div class="program-item">
                        <div class="program-icon">
                            <i class="fas fa-handshake"></i>
        </div>
                        <h3>Kartiship</h3>
                        <p class="subtitle">Mentorship Program</p>
                        <p>Mentorship program providing ongoing support and guidance. Get paired with mentors in your field of focus to navigate your career path and overcome challenges.</p>
            </div>
                    <div class="program-item">
                        <div class="program-icon">
                            <i class="fas fa-network-wired"></i>
                        </div>
                        <h3>Kartinection</h3>
                        <p class="subtitle">Networking Platform</p>
                        <p>Networking for female engineering students. Connect with professionals, alumni, and peers to expand your professional network and gain industry insights.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="about-us" id="our-team">
        <div class="container about-us-content-container">
            <div class="about-us-content">
                <h1>Our Team</h1>
                <div class="team-nav">
                    <button class="team-btn active" onclick="showTeam('coreteam')">Coreteam <img src="assets/Kartika-logo.png" alt="Logo" class="btn-logo"></button>
                    <button class="team-btn" onclick="showTeam('mentors')">Mentors <img src="assets/Kartika-logo.png" alt="Logo" class="btn-logo"></button>
                    <button class="team-btn" onclick="showTeam('members')">Members <img src="assets/Kartika-logo.png" alt="Logo" class="btn-logo"></button>
                </div>
                <div class="team-gallery-container">
                    <div id="coreteam-gallery" class="team-gallery active">
                        <!-- Core Team Members -->
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Coreteam+1" alt="Coreteam Member">
                            <p class="member-name">Member Name 1</p>
                            <p class="member-title">Coreteam Role</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Coreteam+2" alt="Coreteam Member">
                            <p class="member-name">Member Name 2</p>
                            <p class="member-title">Coreteam Role</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Coreteam+3" alt="Coreteam Member">
                            <p class="member-name">Member Name 3</p>
                            <p class="member-title">Coreteam Role</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Coreteam+4" alt="Coreteam Member">
                            <p class="member-name">Member Name 4</p>
                            <p class="member-title">Coreteam Role</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Coreteam+5" alt="Coreteam Member">
                            <p class="member-name">Member Name 5</p>
                            <p class="member-title">Coreteam Role</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Coreteam+6" alt="Coreteam Member">
                            <p class="member-name">Member Name 6</p>
                            <p class="member-title">Coreteam Role</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Coreteam+7" alt="Coreteam Member">
                            <p class="member-name">Member Name 7</p>
                            <p class="member-title">Coreteam Role</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Coreteam+8" alt="Coreteam Member">
                            <p class="member-name">Member Name 8</p>
                            <p class="member-title">Coreteam Role</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Coreteam+9" alt="Coreteam Member">
                            <p class="member-name">Member Name 9</p>
                            <p class="member-title">Coreteam Role</p>
                        </div>
                    </div>
                    <div id="mentors-gallery" class="team-gallery">
                        <!-- Mentors Gallery -->
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Mentor+1" alt="Mentor">
                            <p class="member-name">Mentor Name 1</p>
                            <p class="member-title">Mentor Title</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Mentor+2" alt="Mentor">
                            <p class="member-name">Mentor Name 2</p>
                            <p class="member-title">Mentor Title</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Mentor+3" alt="Mentor">
                            <p class="member-name">Mentor Name 3</p>
                            <p class="member-title">Mentor Title</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Mentor+4" alt="Mentor">
                            <p class="member-name">Mentor Name 4</p>
                            <p class="member-title">Mentor Title</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Mentor+5" alt="Mentor">
                            <p class="member-name">Mentor Name 5</p>
                            <p class="member-title">Mentor Title</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Mentor+6" alt="Mentor">
                            <p class="member-name">Mentor Name 6</p>
                            <p class="member-title">Mentor Title</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Mentor+7" alt="Mentor">
                            <p class="member-name">Mentor Name 7</p>
                            <p class="member-title">Mentor Title</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Mentor+8" alt="Mentor">
                            <p class="member-name">Mentor Name 8</p>
                            <p class="member-title">Mentor Title</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Mentor+9" alt="Mentor">
                            <p class="member-name">Mentor Name 9</p>
                            <p class="member-title">Mentor Title</p>
                        </div>
                    </div>
                    <div id="members-gallery" class="team-gallery">
                        <!-- Members Gallery -->
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Member+1" alt="Member">
                            <p class="member-name">Member Name 1</p>
                            <p class="member-title">Member Title</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Member+2" alt="Member">
                            <p class="member-name">Member Name 2</p>
                            <p class="member-title">Member Title</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Member+3" alt="Member">
                            <p class="member-name">Member Name 3</p>
                            <p class="member-title">Member Title</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Member+4" alt="Member">
                            <p class="member-name">Member Name 4</p>
                            <p class="member-title">Member Title</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Member+5" alt="Member">
                            <p class="member-name">Member Name 5</p>
                            <p class="member-title">Member Title</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Member+6" alt="Member">
                            <p class="member-name">Member Name 6</p>
                            <p class="member-title">Member Title</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Member+7" alt="Member">
                            <p class="member-name">Member Name 7</p>
                            <p class="member-title">Member Title</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Member+8" alt="Member">
                            <p class="member-name">Member Name 8</p>
                            <p class="member-title">Member Title</p>
                        </div>
                        <div class="team-member">
                            <img src="https://via.placeholder.com/1080x1080?text=Member+9" alt="Member">
                            <p class="member-name">Member Name 9</p>
                            <p class="member-title">Member Title</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="about-us" id="testimonials">
        <div class="container about-us-content-container">
            <div class="about-us-content">
                <h1>What they say about us</h1>
                <div class="testimonials-carousel">
                    <div class="testimonial-card">
                        <p class="testimonial-text">“Selama menjadi member kartika aku ga pernah merasa kurang sama sekali terkait setiap kegiatan yang dilakuin oleh Kartika. Aku sangat berterima kasih kepada Kak Ugi udah ciptain Kartika dan nerima aku, yang buat aku bener-bener ngerasain manfaat dari segi wawasan, pengalaman, relasi yang sangat berharga dan berkualitas.”</p>
                        <p class="testimonial-author"><strong>A. Safinah</strong> | Mining Engineering | Universitas Hasanuddin</p>
                </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">“Selama program Kartika.id berlangsung saya menyukai sesi sharing karena bersifat sangat terbuka dan saya bisa bertanya secara puas untuk berbagi pengalaman yang belum pernah saya rasakan”</p>
                        <p class="testimonial-author"><strong>Dwi Friandini</strong> | Industrial Engineering | Institut Pertanian Bogor</p>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">“Kartika.id membantu saya untuk bisa bertemu dengan mentors, speakers, dan teman-teman yang memiliki visi yang sejalan dan mempunyai semangat yang sama besarnya dengan saya, walau saya sedang menempuh studi di negara lain tapi saya merasa tantangan yang dihadapi tetaplah sama.”</p>
                        <p class="testimonial-author"><strong>Salsabila Zulmi</strong> | Civil Engineering | Sungkyunkwan University</p>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">“The community at Kartika.id is truly inspiring. It's a great platform for female engineers to connect and grow. I've gained so much from the sharing sessions and mentorship.”</p>
                        <p class="testimonial-author"><strong>Placeholder Name 4</strong> | Engineering Field | University Name</p>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">“Kartika.id has opened doors to opportunities I never thought possible. The networking events are invaluable, and the support from mentors is exceptional. Highly recommend!”</p>
                        <p class="testimonial-author"><strong>Placeholder Name 5</strong> | Engineering Field | University Name</p>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">“Being part of Kartika.id has boosted my confidence and provided me with practical skills and insights for my career. The shared experiences are truly relatable and empowering.”</p>
                        <p class="testimonial-author"><strong>Placeholder Name 6</strong> | Engineering Field | University Name</p>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">“I appreciate the diverse perspectives and the collaborative spirit within Kartika.id. It's a fantastic environment to learn, share, and get guidance from experienced professionals.”</p>
                        <p class="testimonial-author"><strong>Placeholder Name 7</strong> | Engineering Field | University Name</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="chat-section" class="chat-section container">
        <h2 class="chat-title">Chat with Kartika.id AI!</h2>
        <div class="chat-container">
            <div class="chat-main-wrapper">
                <div class="quick-buttons">
                    <div class="context-header">
                        <span>FAQ</span>
                        <button class="minimize-question-box">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                    </div>
                    <div class="questions-container">
                        <button class="quick-btn" onclick="askQuestion('What is Kartika.id?')">
                            What is Kartika.id?
                            <span class="question-category">About</span>
                        </button>
                        <button class="quick-btn" onclick="askQuestion('What are Kartika.id\'s programs?')">
                            What are Kartika.id's programs?
                            <span class="question-category">Programs</span>
                        </button>
                        <button class="quick-btn" onclick="askQuestion('What are the requirements to join Kartika.id?')">
                            What are the requirements to join Kartika.id?
                            <span class="question-category">Joining</span>
                        </button>
                        <button class="quick-btn" onclick="askQuestion('How can I join Kartika.id?')">
                            How can I join Kartika.id?
                            <span class="question-category">Joining</span>
                        </button>
                        <button class="quick-btn" onclick="askQuestion('Who founded Kartika.id?')">
                            Who founded Kartika.id?
                            <span class="question-category">About</span>
                        </button>
                        <button class="quick-btn" onclick="askQuestion('What are the benefits of joining Kartika.id?')">
                            What are the benefits of joining Kartika.id?
                            <span class="question-category">Benefits</span>
                        </button>
                    </div>
                </div>
                
                <div class="chat-main">
                    <div class="chat-header">
                        <div class="bot-profile">
                            <img src="assets/foto-akmal.jpeg" alt="Rio AI" class="bot-avatar">
                            <div class="bot-info">
                                <h4>Rio AI Assistant</h4>
                                <span class="status">Online</span>
                            </div>
                        </div>
                        <div class="chat-actions">
                            <button class="clear-chat" onclick="clearChat()">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </div>
                    <div id="chatMessages"></div>
                    <div class="chat-input-container">
                        <div class="input-group">
                            <input type="text" id="userInput" placeholder="Ask something here...">
                            <button id="sendButton" onclick="sendMessage()">
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                        <p class="disclaimer">Note: AI responses may not always be accurate... that's why you should interview the real Rio instead! 😉</p>
                        <div class="typing-indicator" style="display: none;">
                            <span></span><span></span><span></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>Connect with me</p>
            <div class="social-links">
                <a href="contact.html"><i class="fas fa-envelope"></i></a>
                <a href="https://www.linkedin.com/in/rionggara"><i class="fab fa-linkedin"></i></a>
                <a href="https://bit.ly/PortofolioRio-2025"><i class="fas fa-folder"></i></a>
            </div>
        </div>
    </footer>

    <div class="floating-chat">
        <div class="floating-chat-header">
            <img src="assets/foto-akmal.jpeg" alt="Rio AI">
            <div class="floating-chat-header-text">
                <h4>Chat with Rio AI</h4>
                <p>Ask me anything!</p>
            </div>
            <button class="minimize-btn">
                <i class="fas fa-chevron-down"></i>
            </button>
        </div>
        <div class="floating-chat-input">
            <input type="text" placeholder="Type your question..." id="floatingInput">
            <button onclick="handleFloatingChat()">
                <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/qna"></script>

    <script type="module">
        import { RIO_SYSTEM_CONTENT } from './rio-content.js';
        
        const API_ENDPOINT = '/.netlify/functions/chat';  // Netlify Functions endpoint

        async function query(userMessage) {
            try {
                const response = await fetch(API_ENDPOINT, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        message: userMessage
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();
                return result.message;
            } catch (error) {
                console.error("API Error:", error);
                throw error;
            }
        }

        window.askQuestion = async function(question) {
            if (isThinking) return;
            
            const input = document.getElementById('userInput');
            input.value = question;
            sendMessage();
        };

        window.generateAIResponse = query;
    </script>

    <script>
        // Add this at the top with other global variables
        let messageHistory = [];
        let isThinking = false;
        let firstMessageSent = false; // Add this flag at the top with other variables

        // Update the formatMessageWithLinks function
        function formatMessageWithLinks(message) {
            // First handle bold text marked with asterisks
            message = message.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            
            // Handle numbered points that start with ": " and end with "."
            message = message.replace(/:\s*(\d+)\./g, '<br><strong>$1.</strong>');
            
            // Handle numbered points that start with ". " and end with "."
            message = message.replace(/\.\s*(\d+)\./g, '<br><strong>$1.</strong>');
            
            // Then handle the dashes by converting them to line breaks
            message = message.replace(/\s-\s/g, '<br>- ');
            
            // Enhanced URL regex pattern to better catch .com domains
            const urlRegex = /(https?:\/\/[^\s]+)|(\b(?:www\.|[a-zA-Z0-9-]+\.)?[a-zA-Z0-9-]+\.com(?:\/[^\s]*)?)\b|(bit\.ly\/[^\s]+)/g;
            message = message.replace(urlRegex, function(url) {
                // Add https:// if it's missing
                const href = url.startsWith('http') ? url : 'https://' + url;
                return `<a href="${href}" target="_blank">${url}</a>`;
            });

            // Auto-detect email addresses and make text before @ bold
            const emailRegex = /([a-zA-Z0-9._%+-]+)@([a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/g;
            message = message.replace(emailRegex, function(match, username, domain) {
                return `<a href="mailto:${match}"><strong>${username}</strong>@${domain}</a>`;
            });

            return message;
        }

        function addMessage(text, sender) {
            const messages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            
            if (sender === 'bot') {
                // Create profile container
                const profileContainer = document.createElement('div');
                profileContainer.className = 'bot-profile-container';
                
                // Create profile image
                const profileImg = document.createElement('img');
                profileImg.src = 'assets/foto-akmal.jpeg';
                profileImg.className = 'bot-profile-img';
                profileContainer.appendChild(profileImg);
                
                // Add thinking status if needed
                if (text === 'Thinking...') {
                    const thinkingStatus = document.createElement('div');
                    thinkingStatus.className = 'thinking-status';
                    thinkingStatus.textContent = 'Thinking...';
                    profileContainer.appendChild(thinkingStatus);
                }
                
                // Create message content
                const messageContent = document.createElement('div');
                messageContent.className = 'bot-message';
                messageContent.innerHTML = formatMessageWithLinks(text);
                
                // Append both to message div
                messageDiv.appendChild(profileContainer);
                messageDiv.appendChild(messageContent);
            } else {
                const userMessage = document.createElement('div');
                userMessage.className = 'user-message';
                userMessage.textContent = text;
                messageDiv.appendChild(userMessage);
            }
            
            messages.appendChild(messageDiv);
            messages.scrollTop = messages.scrollHeight;
            messageHistory.push({ role: sender === 'user' ? 'user' : 'assistant', content: text });
        }

        // Update the sendMessage function
        async function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            const sendButton = document.getElementById('sendButton');
            
            if (!message || isThinking) return;

            // Check message limit before processing
            const currentCount = getMessageCount();
            if (currentCount >= MAX_MESSAGES) {
                const nextResetTime = new Date(parseInt(localStorage.getItem('lastResetTime')) + RESET_INTERVAL);
                const formattedTime = nextResetTime.toLocaleTimeString();
                
                input.value = '';
                addMessage(`You've reached your daily message limit (${MAX_MESSAGES} messages). The limit will reset at ${formattedTime}. Please come back later or contact Rio directly!`, 'bot');
                return;
            }
            
            isThinking = true;
            input.disabled = true;
            sendButton.disabled = true;
            input.style.opacity = '0.7';
            sendButton.style.opacity = '0.7';

            addMessage(message, 'user');
            input.value = '';

            const typingIndicator = document.querySelector('.typing-indicator');
            typingIndicator.style.display = 'flex';
            
            try {
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message';
                
                const profileContainer = document.createElement('div');
                profileContainer.className = 'bot-profile-container';
                
                const profileImg = document.createElement('img');
                profileImg.src = 'assets/foto-akmal.jpeg';
                profileImg.className = 'bot-profile-img';
                profileContainer.appendChild(profileImg);
                
                const thinkingMessage = document.createElement('div');
                thinkingMessage.className = 'bot-message';
                thinkingMessage.textContent = 'Thinking...';
                
                messageDiv.appendChild(profileContainer);
                messageDiv.appendChild(thinkingMessage);
                
                const chatMessages = document.getElementById('chatMessages');
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;

                // Send message with history to the API
                const response = await fetch('/.netlify/functions/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: message,
                        history: messageHistory
                    })
                });

                const data = await response.json();
                
                // Remove thinking message
                messageDiv.remove();
                
                // Add AI response
                addMessage(data.message, 'bot');
                
                // Update message history with the new conversation
                messageHistory = data.history;
                
                incrementMessageCount();
                
            } catch (error) {
                console.error('Error:', error);
                addMessage('Sorry, I encountered an error. Please try again.', 'bot');
            } finally {
                isThinking = false;
                input.disabled = false;
                sendButton.disabled = false;
                input.style.opacity = '1';
                sendButton.style.opacity = '1';
                input.focus();
                typingIndicator.style.display = 'none';
            }
        }

        // Update the event listener for Enter key
        document.getElementById('userInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !isThinking) {
                sendMessage();
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            // Set initial reset time if not exists
            if (!localStorage.getItem('lastResetTime')) {
                localStorage.setItem('lastResetTime', new Date().getTime());
            }
            
            // Update the remaining messages display
            updateRemainingMessages();

            // Initial greeting message
            setTimeout(() => {
                addMessage("Hi! Thank you for visiting my personal website. What would you like to know about me?", 'bot');
            }, 500);
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mainInput = document.getElementById('userInput');
            const floatingInput = document.getElementById('floatingInput');
            
            const questions = [
                "Hi, what's your question about Kartika.id?",
                "What are Kartika.id's main programs?",
                "What are the requirements to join Kartika.id?",
                "How can I participate in Kartika.id events?",
                "Who founded Kartika.id?",
                "What are the benefits of being a Kartika.id member?",
                "How does Kartika.id empower female engineers?",
                "Tell me about Kartishare program.",
                "Tell me about Kartiship program.",
                "Tell me about Kartinection program."
            ];
            
            let currentIndex = 0;
            
            // Set initial placeholder for both inputs
            mainInput.placeholder = questions[0];
            floatingInput.placeholder = questions[0];
            
            // Update placeholders periodically
            setInterval(() => {
                currentIndex = (currentIndex + 1) % questions.length;
                mainInput.placeholder = questions[currentIndex];
                floatingInput.placeholder = questions[currentIndex];
            }, 4000);

            // Add Tab key functionality for floating input
            floatingInput.addEventListener('keydown', function(e) {
                if (e.key === 'Tab') {
                    e.preventDefault();
                    const placeholderText = this.placeholder;
                    this.value = placeholderText;
                    this.setSelectionRange(placeholderText.length, placeholderText.length);
                }
            });
        });
    </script>

    <script>
        // Disable right-click
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });

        // Disable F11 and developer tools
        document.addEventListener('keydown', function(e) {
            // Disable F11
            if (e.keyCode == 122) {
                e.preventDefault();
            }
            
            // Disable Ctrl+U (view source)
            if (e.ctrlKey && e.keyCode == 85) {
                e.preventDefault();
            }
            
            // Disable Ctrl+Shift+I and F12 (developer tools)
            if (e.ctrlKey && e.shiftKey && e.keyCode == 73) {
                e.preventDefault();
            }
            if (e.keyCode == 123) {
                e.preventDefault();
            }
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get the button
            const button = document.querySelector('a[href="#chat-section"]');
            
            // Add click event listener
            button.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Smooth scroll to chat section
                document.querySelector('#chat-section').scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            });
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const input = document.getElementById('userInput');
            
            input.addEventListener('keydown', function(e) {
                // Check if the pressed key is Tab
                if (e.key === 'Tab') {
                    e.preventDefault(); // Prevent default tab behavior
                    
                    // Get current placeholder text and set it as input value
                    const placeholderText = this.placeholder;
                    this.value = placeholderText;
                    
                    // Place cursor at the end of the text
                    this.setSelectionRange(placeholderText.length, placeholderText.length);
                }
            });
        });
    </script>

    <script>
        // Update the clearChat function to also clear message history
        function clearChat() {
            if (window.isClearingChat) return;
            window.isClearingChat = true;

            const clearButton = document.querySelector('.clear-chat');
            clearButton.style.opacity = '0.5';
            clearButton.style.pointerEvents = 'none';

            const userInput = document.getElementById('userInput');
            const sendButton = document.getElementById('sendButton');
            const quickButtons = document.querySelectorAll('.quick-btn');
            const floatingInput = document.getElementById('floatingInput');
            const messages = document.querySelectorAll('#chatMessages .message');
            
            userInput.disabled = true;
            sendButton.disabled = true;
            floatingInput.disabled = true;
            quickButtons.forEach(btn => btn.style.pointerEvents = 'none');
            
            userInput.style.opacity = '0.7';
            sendButton.style.opacity = '0.7';
            quickButtons.forEach(btn => btn.style.opacity = '0.7');
            
            messages.forEach((message, index) => {
                const randomRotation = Math.random() * 360 - 180;
                message.style.setProperty('--rotation', `${randomRotation}deg`);
                message.classList.add('clearing');
            });
            
            setTimeout(() => {
                const chatMessages = document.getElementById('chatMessages');
                chatMessages.innerHTML = '';
                messageHistory = []; // Clear the message history
                
                userInput.disabled = false;
                sendButton.disabled = false;
                floatingInput.disabled = false;
                quickButtons.forEach(btn => btn.style.pointerEvents = 'auto');
                
                userInput.style.opacity = '1';
                sendButton.style.opacity = '1';
                quickButtons.forEach(btn => btn.style.opacity = '1');
                
                clearButton.style.opacity = '1';
                clearButton.style.pointerEvents = 'auto';
                
                addMessage("Hi! Thank you for visiting my personal website. What would you like to know about me?", 'bot');
                
                userInput.focus();

                updateRemainingMessages();

                setTimeout(() => {
                    window.isClearingChat = false;
                }, 2000);

            }, 1000);
        }

        // Add sound effect for messages
        function playMessageSound() {
            const audio = new Audio('path/to/message-sound.mp3'); // Add your sound file
            audio.volume = 0.2;
            audio.play().catch(e => console.log('Audio play failed:', e));
        }

        // Update addMessage function to include timestamps
        function addMessage(text, sender) {
            const messages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            
            if (sender === 'bot') {
                // Create profile container
                const profileContainer = document.createElement('div');
                profileContainer.className = 'bot-profile-container';
                
                // Create profile image
                const profileImg = document.createElement('img');
                profileImg.src = 'assets/foto-akmal.jpeg';
                profileImg.className = 'bot-profile-img';
                profileContainer.appendChild(profileImg);
                
                // Add thinking status if needed
                if (text === 'Thinking...') {
                    const thinkingStatus = document.createElement('div');
                    thinkingStatus.className = 'thinking-status';
                    thinkingStatus.textContent = 'Thinking...';
                    profileContainer.appendChild(thinkingStatus);
                }
                
                // Create message content
                const messageContent = document.createElement('div');
                messageContent.className = 'bot-message';
                messageContent.innerHTML = formatMessageWithLinks(text);
                
                // Append both to message div
                messageDiv.appendChild(profileContainer);
                messageDiv.appendChild(messageContent);
            } else {
                const userMessage = document.createElement('div');
                userMessage.className = 'user-message';
                userMessage.textContent = text;
                messageDiv.appendChild(userMessage);
            }
            
            messages.appendChild(messageDiv);
            messages.scrollTop = messages.scrollHeight;
            messageHistory.push({ role: sender === 'user' ? 'user' : 'assistant', content: text });

            const timestamp = document.createElement('div');
            timestamp.className = 'message-timestamp';
            timestamp.textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            messageDiv.appendChild(timestamp);
            playMessageSound();
        }
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const floatingChat = document.querySelector('.floating-chat');
            const chatSection = document.getElementById('chat-section');
            const floatingInput = document.getElementById('floatingInput');
            
            // Handle scroll events
            window.addEventListener('scroll', function() {
                const chatSectionTop = chatSection.offsetTop;
                const chatSectionBottom = chatSectionTop + chatSection.offsetHeight;
                const scrollPosition = window.scrollY + window.innerHeight;
                
                // Hide floating chat when chat section is visible
                if (scrollPosition > chatSectionTop && window.scrollY < chatSectionBottom) {
                    floatingChat.classList.add('hidden');
                } else {
                    floatingChat.classList.remove('hidden');
                    // Restore minimized state if it was minimized
                    if (localStorage.getItem('chatMinimized') === 'true') {
                        floatingChat.classList.add('minimized');
                    }
                }
            });
            
            // Handle floating chat input
            floatingInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleFloatingChat();
                }
            });
        });

        function handleFloatingChat() {
            const floatingInput = document.getElementById('floatingInput');
            const message = floatingInput.value.trim();
            
            // Check message limit before processing
            const currentCount = getMessageCount();
            if (currentCount >= MAX_MESSAGES) {
                const nextResetTime = new Date(parseInt(localStorage.getItem('lastResetTime')) + RESET_INTERVAL);
                const formattedTime = nextResetTime.toLocaleTimeString();
                
                alert(`You've reached your daily message limit (${MAX_MESSAGES} messages). The limit will reset at ${formattedTime}. Please come back later or contact Rio directly!`);
                floatingInput.value = '';
                floatingInput.disabled = true; // Disable input when limit is reached
                return;
            }
            
            if (message) {
                document.getElementById('chat-section').scrollIntoView({ behavior: 'smooth' });
                setTimeout(() => {
                    document.getElementById('userInput').value = message;
                    floatingInput.value = '';
                    sendMessage();
                }, 500);
            }
        }
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mainInput = document.getElementById('userInput');
            const floatingInput = document.getElementById('floatingInput');
            
            const questions = [
                "Hi, what's your question about Kartika.id?",
                "What are Kartika.id's main programs?",
                "What are the requirements to join Kartika.id?",
                "How can I participate in Kartika.id events?",
                "Who founded Kartika.id?",
                "What are the benefits of being a Kartika.id member?",
                "How does Kartika.id empower female engineers?",
                "Tell me about Kartishare program.",
                "Tell me about Kartiship program.",
                "Tell me about Kartinection program."
            ];
            
            let currentIndex = 0;
            
            // Set initial placeholder for both inputs
            mainInput.placeholder = questions[0];
            floatingInput.placeholder = questions[0];
            
            // Update placeholders periodically
            setInterval(() => {
                currentIndex = (currentIndex + 1) % questions.length;
                mainInput.placeholder = questions[currentIndex];
                floatingInput.placeholder = questions[currentIndex];
            }, 4000);

            // Add Tab key functionality for floating input
            floatingInput.addEventListener('keydown', function(e) {
                if (e.key === 'Tab') {
                    e.preventDefault();
                    const placeholderText = this.placeholder;
                    this.value = placeholderText;
                    this.setSelectionRange(placeholderText.length, placeholderText.length);
                }
            });
        });
    </script>

    <script>
        // Add these constants at the top of your script
        const MAX_MESSAGES = 50;
        const RESET_INTERVAL = 12 * 60 * 60 * 1000; // 24 hours in milliseconds

        // Add these functions to manage message limits
        function getMessageCount() {
            const count = localStorage.getItem('chatMessageCount') || 0;
            const lastReset = localStorage.getItem('lastResetTime');
            const currentTime = new Date().getTime();

            // Check if we need to reset the counter
            if (lastReset && (currentTime - lastReset) >= RESET_INTERVAL) {
                localStorage.setItem('chatMessageCount', 0);
                localStorage.setItem('lastResetTime', currentTime);
                return 0;
            }

            return parseInt(count);
        }

        function incrementMessageCount() {
            const currentCount = getMessageCount();
            localStorage.setItem('chatMessageCount', currentCount + 1);
            localStorage.setItem('lastResetTime', localStorage.getItem('lastResetTime') || new Date().getTime());
            updateRemainingMessages();
        }

        function updateRemainingMessages() {
            const remaining = Math.max(0, MAX_MESSAGES - getMessageCount()); // Ensure remaining never goes negative
            const disclaimer = document.querySelector('.disclaimer');
            
            if (remaining === 0) {
                const nextResetTime = new Date(parseInt(localStorage.getItem('lastResetTime')) + RESET_INTERVAL);
                const formattedTime = nextResetTime.toLocaleTimeString();
                disclaimer.innerHTML = `You've reached your daily message limit. Messages will reset at ${formattedTime}. Please come back later or contact Rio directly! 😊`;
                
                // Disable inputs when limit is reached
                document.getElementById('userInput').disabled = true;
                document.getElementById('sendButton').disabled = true;
                document.getElementById('floatingInput').disabled = true;
            } else {
                disclaimer.innerHTML = `Note: AI responses may not always be accurate... that's why you should interview the real Rio instead! 😉`;
            }
        }
    </script>

    <script>
        // Add this JavaScript to handle minimizing
        document.addEventListener('DOMContentLoaded', function() {
            const floatingChat = document.querySelector('.floating-chat');
            const minimizeBtn = document.querySelector('.minimize-btn');
            const chatHeader = document.querySelector('.floating-chat-header');
            
            // Handle minimize button click
            minimizeBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                floatingChat.classList.toggle('minimized');
                
                // Save state to localStorage
                localStorage.setItem('chatMinimized', floatingChat.classList.contains('minimized'));
            });
            
            // Handle header click to maximize
            chatHeader.addEventListener('click', function() {
                if (floatingChat.classList.contains('minimized')) {
                    floatingChat.classList.remove('minimized');
                    localStorage.setItem('chatMinimized', false);
                }
            });
            
            // Restore previous state
            const wasMinimized = localStorage.getItem('chatMinimized') === 'true';
            if (wasMinimized) {
                floatingChat.classList.add('minimized');
            }
            
            // Update existing scroll handling to preserve minimized state
            window.addEventListener('scroll', function() {
                const chatSection = document.getElementById('chat-section');
                const chatSectionTop = chatSection.offsetTop;
                const chatSectionBottom = chatSectionTop + chatSection.offsetHeight;
                const scrollPosition = window.scrollY + window.innerHeight;
                
                // Hide floating chat when chat section is visible
                if (scrollPosition > chatSectionTop && window.scrollY < chatSectionBottom) {
                    floatingChat.classList.add('hidden');
                } else {
                    floatingChat.classList.remove('hidden');
                    // Restore minimized state if it was minimized
                    if (localStorage.getItem('chatMinimized') === 'true') {
                        floatingChat.classList.add('minimized');
                    }
                }
            });
        });
    </script>

    <script>
        // Add this JavaScript for the question box minimize functionality
        document.addEventListener('DOMContentLoaded', function() {
            const quickButtons = document.querySelector('.quick-buttons');
            const minimizeQuestionBox = document.querySelector('.minimize-question-box');
            
            // Handle minimize button click
            minimizeQuestionBox.addEventListener('click', function(e) {
                e.stopPropagation();
                quickButtons.classList.toggle('minimized');
                
                // Save state to localStorage
                localStorage.setItem('questionBoxMinimized', quickButtons.classList.contains('minimized'));
            });
            
            // Restore previous state
            const wasMinimized = localStorage.getItem('questionBoxMinimized') === 'true';
            if (wasMinimized) {
                quickButtons.classList.add('minimized');
            }
            
            // Handle clicking the minimized question box to restore
            quickButtons.addEventListener('click', function() {
                if (quickButtons.classList.contains('minimized')) {
                    quickButtons.classList.remove('minimized');
                    localStorage.setItem('questionBoxMinimized', false);
                }
            });
        });
    </script>

    <script>
        function showTeam(teamType) {
            // Remove active class from all buttons
            document.querySelectorAll('.team-btn').forEach(btn => btn.classList.remove('active'));
            // Hide all galleries
            document.querySelectorAll('.team-gallery').forEach(gallery => gallery.classList.remove('active'));

            // Add active class to the clicked button
            document.querySelector(`.team-btn[onclick="showTeam('${teamType}')"]`).classList.add('active');
            // Show the corresponding gallery
            document.getElementById(`${teamType}-gallery`).classList.add('active');
        }
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const carousel = document.querySelector('.testimonials-carousel');
            console.log('Carousel element:', carousel); // Debug: Check if carousel is found

            if (!carousel) {
                console.error('Testimonials carousel element not found!');
                return; // Stop if carousel element is not found
            }

            let scrollAmount = 0;
            const scrollSpeed = 2; // Increased for better visibility
            let animationFrameId;

            function autoScroll() {
                scrollAmount += scrollSpeed;
                if (scrollAmount >= carousel.scrollWidth - carousel.clientWidth) {
                    scrollAmount = 0;
                }
                carousel.scrollLeft = scrollAmount;
                animationFrameId = requestAnimationFrame(autoScroll);
                console.log('Scrolling...', 'scrollLeft:', carousel.scrollLeft, 'scrollWidth:', carousel.scrollWidth, 'clientWidth:', carousel.clientWidth); // Debug: Check scrolling values
            }

            function startScroll() {
                if (!animationFrameId) {
                    autoScroll();
                }
            }

            function stopScroll() {
                cancelAnimationFrame(animationFrameId);
                animationFrameId = null;
            }

            carousel.addEventListener('mouseenter', stopScroll);
            carousel.addEventListener('mouseleave', startScroll);

            startScroll(); // Start scrolling when page loads
        });
    </script>
</body>
</html>ml>
